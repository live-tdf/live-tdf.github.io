<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Regarde le Tour de France</title>
  <script src="https://cdn.jsdelivr.net/npm/@discordjs/social-sdk@latest/dist/social-sdk.min.js"></script>
</head>
<body>
  <h1>Regarde le Tour de France</h1>
  <button id="connect-btn">Se connecter Ã  Discord</button>
  <p id="status"></p>

  <script>
    const clientId = '1395415330050019400'; // Remplace par ton Client ID Discord

    const discord = new window.DiscordSocialSDK.DiscordSocialSDK({ clientId });

    document.getElementById('connect-btn').onclick = async () => {
      try {
        const user = await discord.login();
        document.getElementById('status').innerText = `ConnectÃ© en tant que ${user.username}`;

        await discord.setActivity({
          state: 'Ã‰tape 12 : Auch â†’ Hautacam',
          details: 'Sur Franceâ€¢tv',
          largeImageKey: 'tdf',
          largeImageText: 'Tour de France 2025 ðŸš´',
          buttons: [
            { label: 'Regarder en direct', url: 'https://www.france.tv/france-2/direct/' }
          ]
        });

        alert(`PrÃ©sence Discord mise Ã  jour pour ${user.username} !`);
      } catch (e) {
        console.error(e);
        alert('Erreur lors de la connexion Discord');
      }
    };
  </script>
</body>
</html>
